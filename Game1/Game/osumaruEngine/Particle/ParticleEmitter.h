#pragma once
class Particle;
class Camera;
#include "../Graphics/Texture.h"

struct SParticleEmittInfo
{
	char*	filePath;			//テクスチャのファイルパス
	float width;				//パーティクルの横幅
	float height;				//パーティクルの縦幅
	D3DXVECTOR4 uv;				//テクスチャのuv座標。左上のuv、右下のuv
	float	lifeTime;			//パーティクルの寿命
	float	emittIntervalTime;	//パーティクルが出るインターバルの時間
	float	emitterLifeTime;	//エミッターの寿命
	D3DXVECTOR3 emitterPosition;//エミッターの座標
};

//パーティクルエミッター
class ParticleEmitter : public GameObject
{
public:
	//コンストラクタ
	ParticleEmitter();

	//デストラクタ
	~ParticleEmitter();

	/*
	エミッターの初期化
	info　パーティクルとエミッターの初期化情報
	camera	ビルボード処理に使うカメラ
	*/
	void Init(SParticleEmittInfo info, Camera* camera);

	//更新関数
	void Update()override;

	//座標を設定。
	void SetPosition(D3DXVECTOR3 position)
	{
		m_info.emitterPosition = position;
	}

private:
	Camera*					m_camera;		//カメラ
	SParticleEmittInfo		m_info;			//パーティクルとエミッターの初期化情報
	float					m_lifeTimer;	//寿命
	float					m_intervalTime;	//パーティクルを出すインターバルタイム
};